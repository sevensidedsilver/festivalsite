{"version":3,"sources":["app.js","controllers/adminController.js","controllers/controller.js","controllers/forumController.js","controllers/newThread.js","controllers/threadController.js","services/adminService.js","services/authService.js","services/postService.js","services/service.js","services/threadService.js"],"names":["angular","module","config","$stateProvider","$urlRouterProvider","state","url","templateUrl","title","controller","resolve","user","authService","$q","$state","$http","$window","defer","method","then","response","data","location","reject","getCurrentUser","window","catch","alert","go","otherwise","adminService","threadService","$scope","$stateParams","homeSrv","getReportedComments","resp","comments","getReportedThreads","threads","deleteComment","comment_id","dismissComment","deleteThread","thread_id","dismissThread","display_name","admin","menuclass","togglemenu","hideMenu","getThreads","openThreads","forEach","el","timeAgo","moment","created_at","fromNow","postService","postNewThread","thread_author","thread_title","postTitle","thread_content","postText","postThread","console","log","username","getcomments","thread","getTopLevelComments","topLevelComments","findThread","addComment","parent_comment","author_display","comment_content","createComment","push","reportThread","reportComment","reportcomment","service","get","test","res","error","id","timeFrom","time","startOf"],"mappings":"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","file":"all.js","sourcesContent":["angular.module('app', ['ui.router'])\n\n\n\n\n\n\n    .config(function($stateProvider, $urlRouterProvider){\n      //$urlRouterProvider.when(\"login\", window.location = \"http://localhost:3000/auth\")\n\n      $stateProvider\n        .state('home', {\n            url: '/',\n            templateUrl: \"./app/views/home/home.html\"\n\n        })\n\n// login state\n        .state('login', {\n            url: '/auth'\n\n        })\n\n// the forum\n        .state('forum', {\n            url: '/forum',\n            templateUrl: \"./app/views/forum/forum.html\",\n            title: 'Rha - Phorum',\n            controller: 'forumCtrl',\n            resolve:{\n              user: function (authService, $q, $state, $http, $window) {\n                var defer = $q.defer()\n               $http({\n                  method: \"GET\",\n                  url: '/auth/me'\n                }).then((response) => {\n\n                      if(!response.data.user) {\n                          $window.location = \"http://localhost:3000/auth\"\n                          defer.reject()\n                      } else {defer.resolve(response.data)}\n                  })\n              }\n            }\n        } )\n\n        .state('addpost', {\n            url: '/addpost',\n            controller: 'newPostCtrl',\n            templateUrl: \"./app/views/forum/addpost.html\",\n            resolve: {\n              user: (authService, $state) => {\n                  return authService.getCurrentUser().then((response) => {\n                      if(!response.data) {\n                          window.location = \"http://localhost:3000/auth\"\n                      } return response.data\n                  }).catch(err => {\n                      window.location = \"http://localhost:3000/auth\"\n                  })\n              }\n            }\n        } )\n        // up in a thread\n        .state('thread', {\n              url: '/thread/:thread_id',\n              templateUrl: \"./app/views/forum/thread.html\",\n\n              //needs controller\n              controller: \"thread\",\n              resolve: {\n                user: (authService, $state) => {\n                    return authService.getCurrentUser().then((response) => {\n                        if(!response.data) {\n                            window.location = \"http://localhost:3000/auth\"\n                        } return response.data\n                    }).catch(err => {\n                        window.location = \"http://localhost:3000/auth\"\n                    })\n                }\n              }\n          })\n\n// example from dallin\n          .state('admin', {\n             templateUrl: './app/views/forum/admin.html',\n             url: '/admin',\n               controller: 'adminController',\n               resolve: {\n                 user: (authService, $state) => {\n                     return authService.getCurrentUser().then((response) => {\n                       //console.log(response.data.user[2])\n                        if (response.data.user[2] === 0) {\n                          window.alert(\"You are not an admin.\")\n                          $state.go('forum')\n                        }\n\n                         if(!response.data) {\n                             window.location = \"http://localhost:3000/auth\"\n                         } return response.data\n                     }).catch(err => {\n                         window.location = \"http://localhost:3000/auth\"\n                     })\n                 }\n               }\n           })\n\n\n        $urlRouterProvider\n            .otherwise('/')\n    })\n","angular.module('app').controller('adminController', function(adminService, $state, threadService, authService, $scope, $http, $window, $stateParams, homeSrv){\n\n\n// get all reported comments\n$scope.getReportedComments = function(){\n  adminService.getReportedComments().then(function(resp){\n    $scope.comments = resp.data\n  })\n}\n$scope.getReportedComments();\n\n\n// get all reported threads\n$scope.getReportedThreads = function(){\n  adminService.getReportedThreads().then(function(resp){\n    $scope.threads = resp.data\n  })\n}\n$scope.getReportedThreads();\n\n// deletes a comment\n$scope.deleteComment = function(comment_id){\n\n  adminService.deleteComment(comment_id).then(function(resp){\n    return resp\n  })\n}\n\n// dismiss comment reported\n$scope.dismissComment = function(comment_id){\n\n  adminService.dismissComment(comment_id).then(function(resp){\n    return resp\n  })\n}\n\n// deletes a thread\n$scope.deleteThread = function(thread_id){\n  adminService.deleteThread(thread_id).then(function(resp){\n    return resp\n  })\n}\n\n//dismiss thread report\n$scope.dismissThread = function(thread_id){\n  adminService.dismissThread(thread_id).then(function(resp){\n    return resp\n  })\n}\n\n\n\n  //this gets the session and pulls the displayName from it\n  $http({\n     method: \"GET\",\n     url: '/auth/me'\n   }).then((response) => {\n\n         if(!response.data.user) {\n             $window.location = \"http://localhost:3000/auth\"\n             defer.reject()\n         } else {\n\n           $scope.display_name = response.data.user[1]\n           $scope.admin = {\n             display_name : $scope.display_name\n\n           }\n\n         }\n     })\n\n\n\n\n\n})\n","angular.module('app').controller('homeCtrl', function($scope, $stateParams, homeSrv){\n\n\n// show the menu on click\n  $scope.menuclass = \"mobile-menu\"\n  $scope.togglemenu = function(){\n    if ($scope.menuclass === \"mobile-menu\"){\n      $scope.menuclass = \"mobile-menu show-mobile-menu\"\n    } else if ($scope.menuclass === \"mobile-menu show-mobile-menu\"){\n      $scope.menuclass = \"mobile-menu\"\n    }\n  }\n\n\n\n\n\n  $scope.hideMenu = function (){\n    $scope.menuclass = \"mobile-menu\"\n  }\n\n  $scope.getThreads = function(){\n\n    homeSrv.openThreads().then(function(resp){\n      // console.log(resp.data)\n      $scope.threads = resp.data\n\n    })\n\n}\n\n  $scope.getThreads()\n\n// assign threads to the scope\n\n\n\n\n})\n","angular.module('app').controller('forumCtrl', function(authService, $scope, $stateParams, homeSrv){\n\n\n\n\n    $scope.getThreads = function(){\n\n      homeSrv.openThreads().then(function(resp){\n        //console.log(resp)\n\n        resp.data.forEach(function(el){\n\n          el.timeAgo = (moment(el.created_at, \"YYYYMMDD, h:mm:ss\").fromNow())\n        })\n        $scope.threads = resp.data\n      })\n\n  }\n\n    $scope.getThreads()\n\n\n\n\n})\n","angular.module('app').controller('newPostCtrl', function(postService, $state, threadService, authService, $scope, $http, $window, $stateParams, homeSrv){\n\n\n  //create post on button click and push to database\n\n  $scope.postNewThread = function(){\n    var data = {\n      thread_author: $scope.display_name,\n      thread_title: $scope.postTitle,\n      thread_content: $scope.postText,\n//new Date(year, month, day, hours, minutes, seconds)\n    }\n  //  console.log(data.created_at)\n    threadService.postThread(data).then(function(resp){\n      // whatever you want to do after the posting goes here!\n      $scope.postTitle = \"\";\n      $scope.postText = \"\";\n      $state.go('forum')\n\n\n    })\n}\n\n\n  //this gets the session and pulls the displayName from it\n  $http({\n     method: \"GET\",\n     url: '/auth/me'\n   }).then((response) => {\n\n         if(!response.data.user) {\n             $window.location = \"http://localhost:3000/auth\"\n             defer.reject()\n         } else {\n           console.log(response.data.user[0].username)\n           $scope.display_name = response.data.user[0].username\n\n         }\n     })\n\n\n\n\n\n})\n","angular.module('app').controller('thread', function($scope, $state, threadService, $http, $window, $stateParams, homeSrv){\n\n\n  // display all the top level comments for a thread\n    $scope.getcomments = function(){\n    //  console.log($scope.thread.thread_id)\n      let data = $scope.thread.thread_id\n\n      threadService.getTopLevelComments(data).then(function(resp){\n\n\n        resp.data.forEach(function(el){\n\n          el.timeAgo = (moment(el.created_at, \"YYYYMMDD, h:mm:ss\").fromNow())\n        })\n\n        $scope.topLevelComments = resp.data\n\n      //  console.log($scope.topLevelComments)\n      })\n\n  }\n\n\n  // //fetches the thread data from service and assigns it to thread\n  homeSrv.findThread($stateParams.thread_id).then(function(resp){\n    //console.log(resp)\n    $scope.thread = resp.data[0]\n\n    $scope.thread.timeAgo = (moment($scope.thread.created_at, \"YYYYMMDD, h:mm:ss\").fromNow())\n    $scope.getcomments()\n  })\n  // console.log($stateParams.thread_id)\n\n// get the display_name from the session object\n$http({\n   method: \"GET\",\n   url: '/auth/me'\n }).then((response) => {\n\n       if(!response.data.user) {\n           $window.location = \"http://localhost:3000/auth\"\n           defer.reject()\n       } else {\n\n         $scope.display_name = response.data.user[0].username\n\n       }\n   })\n\n\n// '/'/'/'/'/'/'/'/'/'/'/'/\n// submit a new top level comment to a thread\n  $scope.addComment = function(){\n    console.log(\"fire\")\n    var data = {\n      thread_id: $scope.thread.thread_id,\n      parent_comment: 0,\n      author_display: $scope.display_name,\n      comment_content: $scope.comment_content\n    }\n\n    threadService.createComment(data).then(function(resp){\n      // after clicking the button, do this!\n      $scope.comment_content = \"\";\n      $scope.topLevelComments.push(data)\n    })\n  }\n\n// report thread =====================================\n\n$scope.reportThread = function(thread_id){\n    threadService.reportThread(thread_id).then(function(resp){\n      alert(\"Thanks, an admin will review your report soon\")\n    })\n}\n\n// report a comment ===============================\n  $scope.reportComment = function(data){\n    threadService.reportcomment(data).then(function(resp){\n      alert(\"Thanks, an admin will review your report soon\");\n    })\n  }\n\n\n\n\n// END OF MODULE ///////////////////////////////////////////////////////////////\n})\n","angular.module('app').service('adminService', function($http){\n\n  this.getReportedComments = function(){\n    return $http ({\n      method: \"GET\",\n      url: \"/reportedcomments\"\n    }).then(function(resp){\n      return resp\n    })\n\n  }\n\n  this.getReportedThreads = function(){\n    return $http ({\n      method: \"GET\",\n      url: \"/reportedthreads\"\n\n\n    }).then(function(resp){\n      return resp\n    })\n  }\n// delete comment\n  this.deleteComment = function(comment_id){\n    //console.log(comment_id)\n    return $http ({\n      method: \"DELETE\",\n      url: \"/delete/comments/comment_id/\" + comment_id\n      //data must be an object!\n\n    }).then(function(resp){\n      //console.log(data)\n      return resp\n    })\n  }\n// delete thread\nthis.deleteThread = function(thread_id){\n\n  return $http ({\n    method: \"DELETE\",\n    url: \"/delete/threads/thread_id/\" + thread_id\n    //data must be an object!\n\n  }).then(function(resp){\n    //console.log(data)\n    return resp\n  })\n}\n// dismiss comment\n  this.dismissComment = function(comment_id){\n\n    return $http({\n      method: \"PUT\",\n      url: \"/dismisscomment/\" + comment_id,\n\n\n    }).then(function(resp){\n      return resp\n    })\n  }\n  // dismiss thread\n    this.dismissThread = function(thread_id){\n\n      return $http({\n        method: \"PUT\",\n        url: \"/dismissthread/\" + thread_id,\n\n\n      }).then(function(resp){\n        return resp\n      })\n    }\n})\n","angular.module('app').service('authService', function($http){\n\n  // returns the current user object from auth0\n  this.getCurrentUser = function () {\n    //console.log(\"test\")\n    return $http.get('/auth/me').then(function(response){\n      //console.log(response)\n      return response\n\n    })\n\n  }\n\n\n  this.test = function(){\n\n    return $http({\n      method: \"GET\",\n      url: \"/auth/me\"\n    }).then(function(res){\n      //console.log(res)\n    }).catch(function(error){\n      //console.log(error)\n    })\n\n  }\n\n})\n","angular.module('app').service('postService', function($http){\n\n  // returns the current user object from auth0\n  this.getCurrentUser = function () {\n    //console.log(\"test\")\n    return $http.get('/auth/me').then(function(response){\n      //console.log(response)\n      return response\n\n    })\n\n  }\n\n\n  this.test = function(){\n\n    return $http({\n      method: \"GET\",\n      url: \"/auth/me\"\n    }).then(function(res){\n      //console.log(res)\n    }).catch(function(error){\n      //console.log(error)\n    })\n\n  }\n\n})\n","angular.module('app').service('homeSrv', function($http){\n\n  this.openThreads = function(){\n    return $http({\n      url: '/threads',\n      method: 'GET',\n    }).then(function(resp){\n      return resp;\n    })\n  }\n\n\n  this.findThread = function(id){\n    return $http({\n      url: '/thread/' + id,\n      method: 'GET',\n    }).then(function(resp){\n      return resp;\n    })\n  }\n\n// moment JS to get the \"X hours ago\" for comments and threads\n\n  this.timeFrom = function(time) {\n    return(moment(time, \"YYYYMMDD, h:mm:ss\" ).startOf('seconds').fromNow())\n  }\n\n\n\n\n})\n","angular.module('app').service('threadService', function($http){\n\n\n\n// post http posts to database\nthis.postThread = function(data){\n  return $http({\n    method: \"POST\",\n    url: \"/newthread\",\n    data: data\n  })\n},\n\n// get top level comments for a threadService\nthis.getTopLevelComments = function(data){\n  return $http({\n    method:\"GET\",\n    url:\"/gettoplevelcomments/\" + data\n\n  }).then(function(resp){\n\n    return resp\n  })\n}\n\n// post comment\nthis.createComment = function(data){\n  return $http({\n    method: \"POST\",\n    url: \"/newcomment\",\n    data: data\n  })\n},\n\n// report a comment\nthis.reportcomment = function(data){\n  // console.log(data)\n  return $http({\n    method: \"PUT\",\n    url: \"/reportcomment/\" + data\n  })\n},\n\nthis.reportThread = function(data){\n  return $http({\n    method: \"PUT\",\n    url: \"/reportthread/\" + data\n  })\n}\n\n})\n"]}